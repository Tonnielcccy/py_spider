# 数据分析实战

## 1、安居客租房信息分析

### 1.1 项目介绍

爬取安居客长沙市和武汉市的租房信息，进行数据清洗和可视化<br>

### 1.1.1 数据采集

spider文件夹中是项目的爬虫数据采集工作，它的主要功能如下：

| 模块             | 功能    |
|:---------------|:------|
| config.py      | 配置文件  |
| logger.py      | 日志记录  |
| parser.py      | 单页面解析 |
| requester.py   | 请求模块  |
| save.py        | 数据存储  |
| spider_main.py | 爬虫主程序 |
| text.py        | 测试程序  |

config模块中的随机UA能够避免反爬机制的触发，通过日志记载每一次爬取的成功与否，明细整个爬取过程。
在parser模块中使用BeautifulSoup解析HTML页面，提取出我们需要的数据。得到标题、价格、户型、小区名、位置、标签。
在save模块中，保存至output中的cs_anjuke_rentals.csv和wh_anjuke_rentals.csv中。

### 1.1.2 数据处理

processing文件夹中是对数据进行初步的处理工作，它的主要功能如下：

| 模块            | 功能       |
|:--------------|:---------|
| data_clean.py | 数据清洗     |
| data_des.py   | 数据描述     |
| loc_change.py | 模糊位置精准化  |
| loc_api.py    | 地理位置编码   |
| api_text.py   | 地理位置编码测试 |

在数据处理中，首先将初始数据进行去重、去缺失值、去异常值得到清洗后的数据output/cs_cleaned.csv和output/wh_cleaned.csv。
再对数据进行初步的描述统计，得出以下结果：

**长沙市描述统计：**

| 指标    | 租金数值         | 面积数值        |
|:------|:-------------|:------------|
| count | 1682.000000  | 1682.000000 |
| mean  | 2030.202140  | 74.857420   |
| std   | 1499.506245  | 44.695369   |
| min   | 300.000000   | 10.000000   |
| 25%   | 1350.000000  | 41.015000   |
| 50%   | 1700.000000  | 64.305000   |
| 75%   | 2300.000000  | 97.000000   |
| max   | 20000.000000 | 700.000000  |

**武汉市描述统计：**

| 指标    | 租金数值         | 面积数值        |
|:------|:-------------|:------------|
| count | 1212.000000  | 1212.000000 |
| mean  | 1406.923267  | 57.894802   |
| std   | 932.487142   | 34.833831   |
| min   | 300.000000   | 8.500000    |
| 25%   | 620.000000   | 25.000000   |
| 50%   | 1200.000000  | 51.100000   |
| 75%   | 1800.000000  | 86.275000   |
| max   | 12000.000000 | 283.200000  |

**长沙市可视化**

以租金为X轴，房源数量为Y轴绘制直方图，得到如下：
![长沙市租金分布直方图.png](anjuke/output/长沙市租金分布直方图.png)

再绘制长沙市的户型租金箱线图：
![长沙市户型租金箱线图.png](anjuke/output/长沙市户型租金箱线图.png)

对标签绘制词云图：
![长沙市房源标签词云图](anjuke/output/长沙市房源标签词云图.png)

**武汉市可视化**

与长沙市相同武汉市也同样进行这样的可视化。
以租金为X轴，房源数量为Y轴绘制直方图，得到如下：
![武汉市租金分布直方图.png](anjuke/output/武汉市租金分布直方图.png)

绘制武汉市的户型租金箱线图：
![武汉市户型租金箱线图.png](anjuke/output/武汉市户型租金箱线图.png)

对标签绘制词云图：
![武汉市房源标签词云图](anjuke/output/武汉市房源标签词云图.png)

结合两者词云图对比分析来开，交通便利似乎是租房的一大重要条件。

**地理位置编码**
在进行简单的描述性统计和可视化之后，为了后续的分析，需要将原来数据的位置信息置换为经纬度编码信息。
总体的位置编码过程依靠高德地图的开发者平台的Web服务API调用实现，通过API的调用将原来的具体位置信息“长沙市芙蓉区五一广场韭菜园路97号”变为经纬度信息“112.988704,28.193534”。
但是在整体的进行之前，还要将原来的非标准位置转化为高德地图API能够理解的标准化位置信息，这一步骤通过loc_change.py进行。

